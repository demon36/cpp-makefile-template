# cpp-makefile-template
this is a makefile that aims towards letting you build a linux c++ project with the least amount of configuration

### targets:

`make init`
creates the basic directory structure shown below

`make shared` or `make static`
builds .cpp files in src directory into a shared object/static archive in lib directory

`make exec`
builds .cpp files in src directory into an executable in bin directory

`make test`
builds .cpp files in test directory into an executable that is linked against the first shared/static lib file it finds in lib directory 

`make run`
runs the output test executable

`make coverage`
-experimental- makes a build with `--coverage` flag, generates and displays web report

### features

- automatic header dependency generation
- source directories nesting support for `./src` and `./test`
- Linux library versioning, usage: edit `MAJOR_VERSION` & `MINOR_VERSION`
- 32/64bit builds support, usage: `make ARCH=32`, `make ARCH=64` -default is system arch-
- debug and release builds support, usage: `make BUILD=release` or `make BUILD=debug` -default is debug-
- rpath embedding


### remarks

- output executable/shared object/static archive name is determined from project directory name

### example directory structure

```
libtest
|
├── makefile
|
├── src
│   └── TestModule.cpp
|
├── include
│   └── TestModule.h
|
|── test
|    └── major_tests.cpp
|
├── dep --generated--
│   ├── src
│   │   └── TestModule.cpp.dep
│   └── test
│       └── major_tests.cpp.dep
|
├── obj --generated--
│   └── 64
│       └── debug
│           ├── src
│           │   └── TestModule.o
│           └── test
│               └── major_tests.o
|
├── lib --generated--
│   └── 64
│       └── debug
│           ├── libtest.so.0 -> ./libtest.so.0.1.9
│           └── libtest.so.0.1.9
|
├── bin --generated--
│   └── test
│       └── 64
│           └── main_test
|
├── cov --generated by coverage target--
|
└── docs
    └── mydoc.md
```

### todo

- make use of pkg-config
- add install target
- support more architectures
- support packaging via [fpm](https://github.com/jordansissel/fpm)
